<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>珠宝饰品设计稿 - 网格展示系统</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #f9f7f0 0%, #f0e8e1 100%);
            min-height: 100vh;
            padding: 40px 20px;
            color: #333;
            position: relative;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            position: relative;
            animation: fadeInDown 0.8s ease;
        }

        h1 {
            font-size: 2.8rem;
            color: #8b5a2b;
            margin-bottom: 15px;
            position: relative;
            display: inline-block;
            font-weight: 700;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        h1:after {
            content: '';
            display: block;
            width: 100px;
            height: 4px;
            background: linear-gradient(to right, #d4af37, #8b5a2b);
            margin: 15px auto;
            border-radius: 2px;
        }

        .subtitle {
            color: #a67c52;
            font-size: 1.2rem;
            margin-bottom: 25px;
            font-weight: 300;
            letter-spacing: 0.5px;
        }

        .dashboard {
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 18px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.08);
            overflow: hidden;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
            border: 1px solid #f0e6d8;
            animation: slideUp 0.6s ease-out;
        }

        .dashboard:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 8px;
            background: linear-gradient(90deg, #d4af37, #8b5a2b);
        }

        .dashboard-header {
            padding: 25px 30px;
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(to right, #d4af37, #8b5a2b);
            color: white;
            position: relative;
        }

        .dashboard-header h2 {
            font-size: 1.8rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .dashboard-header h2 i {
            font-size: 1.4rem;
            color: #ffd700;
        }

        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            align-items: center;
        }

        .search-box {
            position: relative;
            display: flex;
            align-items: center;
            transition: all 0.3s ease;
        }

        .search-box input {
            padding: 12px 18px 12px 45px;
            border: none;
            border-radius: 30px;
            background-color: rgba(255, 255, 255, 0.95);
            width: 300px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
            font-size: 1rem;
            color: #5d4037;
        }

        .search-box input:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.4);
            width: 350px;
        }

        .search-icon {
            position: absolute;
            left: 18px;
            color: #a67c52;
            font-size: 18px;
        }

        .items-per-page {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.05rem;
        }

        .items-per-page select {
            padding: 9px 16px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background-color: white;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s;
            color: #5d4037;
        }

        .items-per-page select:hover {
            border-color: #d4af37;
            box-shadow: 0 0 0 2px rgba(212, 175, 55, 0.2);
        }

        .sort-controls {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.05rem;
        }

        .sort-controls select {
            padding: 9px 16px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background-color: white;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s;
            color: #5d4037;
        }

        .sort-controls select:hover {
            border-color: #d4af37;
            box-shadow: 0 0 0 2px rgba(212, 175, 55, 0.2);
        }

        /* 网格布局样式 */
        .grid-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
            padding: 30px;
        }

        .product-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
            transition: all 0.4s ease;
            position: relative;
            border: 1px solid #f0e6d8;
            animation: fadeIn 0.4s ease-out;
            animation-fill-mode: backwards;
        }

        .product-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        }

        .card-image {
            position: relative;
            height: 250px;
            overflow: hidden;
            cursor: pointer;
        }

        .card-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        .product-card:hover .card-image img {
            transform: scale(1.05);
        }

        .magnify-icon {
            position: absolute;
            bottom: 15px;
            right: 15px;
            background: rgba(212, 175, 55, 0.85);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            transition: all 0.3s ease;
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.1);
        }

        .magnify-icon:hover {
            background: #d4af37;
            transform: scale(1.15);
        }

        .card-content {
            padding: 20px;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .product-id {
            background: #f5f0e6;
            color: #8b5a2b;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .product-status {
            padding: 6px 15px;
            border-radius: 50px;
            font-weight: 500;
            font-size: 0.95rem;
            display: inline-block;
            min-width: 80px;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .status.available {
            background-color: #e9f7ef;
            color: #27ae60;
        }

        .status.out-of-stock {
            background-color: #fdeded;
            color: #e74c3c;
        }

        .product-name {
            font-size: 1.4rem;
            color: #5d4037;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .product-category {
            display: inline-block;
            background: #f5f0e6;
            color: #8b5a2b;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            margin-bottom: 15px;
        }

        .product-detail {
            font-size: 0.95rem;
            color: #7f6e5e;
            line-height: 1.6;
            margin-bottom: 20px;
            height: 60px;
            overflow: hidden;
        }

        .product-price {
            font-size: 1.5rem;
            color: #d4af37;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .product-quantity {
            color: #7f6e5e;
            font-size: 1rem;
            margin-bottom: 15px;
        }

        .pagination {
            display: flex;
            justify-content: center;
            padding: 28px;
            gap: 14px;
            flex-wrap: wrap;
            border-top: 1px solid #f0e6d8;
            background-color: #fcf9f4;
            position: relative;
        }

        .pagination:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 1px;
            background: linear-gradient(to right, transparent, #d4af37, transparent);
        }

        .pagination button {
            padding: 10px 22px;
            background-color: white;
            border: 1px solid #e1d9cc;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #8b5a2b;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 6px;
            box-shadow: 0 3px 7px rgba(0, 0, 0, 0.05);
            font-size: 1.05rem;
        }

        .pagination button:not([disabled]):hover {
            background-color: #d4af37;
            color: white;
            border-color: #d4af37;
            transform: translateY(-3px);
            box-shadow: 0 6px 10px rgba(212, 175, 55, 0.3);
        }

        .pagination button[disabled] {
            opacity: 0.4;
            cursor: not-allowed;
        }

        .page-number {
            min-width: 45px;
            min-height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            transition: all 0.3s ease;
            font-size: 1.1rem;
            border-radius: 8px;
        }

        .page-number:hover:not(.active) {
            background-color: #f5f0e6;
        }

        .page-number.active {
            background-color: #d4af37;
            color: white;
            border-color: #d4af37;
            font-weight: 600;
            box-shadow: 0 6px 10px rgba(212, 175, 55, 0.2);
        }

        .page-info {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 16px;
            width: 100%;
            justify-content: center;
            font-size: 1.05rem;
            color: #a67c52;
        }

        @media (max-width: 1200px) {
            .grid-container {
                grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            }
        }

        @media (max-width: 992px) {
            .grid-container {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
                gap: 20px;
            }
            
            .card-image {
                height: 220px;
            }
        }

        @media (max-width: 768px) {
            .dashboard-header {
                flex-direction: column;
                align-items: stretch;
            }
            
            .controls {
                width: 100%;
                justify-content: center;
            }
            
            .search-box input {
                width: 100%;
            }
            
            .items-per-page, .sort-controls {
                width: 100%;
                justify-content: space-between;
                max-width: 400px;
            }
            
            .grid-container {
                grid-template-columns: repeat(auto-fill, minmax(100%, 1fr));
                padding: 20px;
            }
            
            h1 {
                font-size: 2.2rem;
            }
        }

        /* 图片模态框样式 - 完整保留并优化 */
        #imageModal {
            display: none;
            position: fixed;
            z-index: 10000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(6px);
            animation: fadeIn 0.4s ease;
        }

        .modal-wrapper {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 30px;
        }

        .modal-content-container {
            position: relative;
            width: 92%;
            max-width: 1300px;
            height: 88vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            animation: zoomIn 0.3s ease;
        }

        .modal-content {
            max-width: 100%;
            max-height: calc(88vh - 160px);
            object-fit: contain;
            border-radius: 10px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.25);
            transition: all 0.4s ease;
        }

        #caption {
            text-align: center;
            color: #fff;
            padding: 20px 0 15px;
            font-size: 1.7rem;
            font-weight: 500;
            width: 100%;
            margin: 15px 0;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .close {
            position: absolute;
            top: 30px;
            right: 40px;
            color: #f1f1f1;
            font-size: 45px;
            font-weight: bold;
            transition: all 0.3s;
            cursor: pointer;
            z-index: 10001;
            background: rgba(0,0,0,0.5);
            border-radius: 50%;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        .close:hover,
        .close:focus {
            color: #ff6b6b;
            background: rgba(0,0,0,0.8);
            transform: rotate(90deg) scale(1.1);
        }

        .modal-controls {
            position: absolute;
            bottom: 80px;
            display: flex;
            justify-content: center;
            gap: 15px;
            width: 100%;
            padding: 15px 0;
            max-width: 680px;
            margin: 0 auto;
            left: 50%;
            transform: translateX(-50%);
            z-index: 100;
        }

        .modal-btn {
            background-color: rgba(212, 175, 55, 0.9);
            color: white;
            border: none;
            padding: 12px 22px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1.15rem;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.25);
            letter-spacing: 0.5px;
            font-weight: 500;
        }

        .modal-btn:hover {
            background-color: #c5a028;
            transform: translateY(-4px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.35);
        }

        .modal-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(30, 40, 50, 0.85);
            color: white;
            border: none;
            padding: 16px;
            cursor: pointer;
            font-size: 32px;
            border-radius: 50%;
            width: 70px;
            height: 70px;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .modal-nav:hover {
            background: rgba(20, 30, 40, 0.95);
            transform: translateY(-50%) scale(1.1);
            color: #d4af37;
        }

        #prevBtn {
            left: 30px;
        }

        #nextBtn {
            right: 30px;
        }
        
        /* 动画定义 */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes zoomIn {
            from {
                transform: scale(0.8);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }
        
        .info-panel {
            display: flex;
            justify-content: center;
            gap: 20px;
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        
        .info-item {
            color: #ffd700;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }
    </style>
</head>

<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-gem"></i> 珠宝饰品设计稿</h1>
            <div class="subtitle">精品珠宝设计展示 | 专为高级珠宝打造的网格布局</div>
        </header>
        
        <section class="dashboard">
            <div class="dashboard-header">
                <h2><i class="fas fa-crown"></i> 珠宝饰品设计稿收藏库</h2>
                <div class="controls">
                    <div class="search-box">
                        <i class="fas fa-search search-icon"></i>
                        <input type="text" id="searchInput" placeholder="搜索珠宝名称、描述或类别...">
                    </div>
                    <div class="items-per-page">
                        <label for="itemsPerPage">每页显示：</label>
                        <select id="itemsPerPage">
                            <option value="6">6 条</option>
                            <option value="12" selected>12 条</option>
                            <option value="24">24 条</option>
                            <option value="48">48 条</option>
                        </select>
                    </div>
                    <div class="sort-controls">
                        <label for="sortField">排序：</label>
                        <select id="sortField">
                            <option value="id">ID</option>
                            <option value="name">产品名称</option>
                            <option value="category">类别</option>
                            <option value="price">价格</option>
                            <option value="quantity">库存</option>
                            <option value="status">状态</option>
                        </select>
                        <select id="sortDirection">
                            <option value="asc">升序</option>
                            <option value="desc">降序</option>
                        </select>
                    </div>
                </div>
            </div>
            
            <div class="grid-container" id="gridContainer">
                <!-- 网格卡片将通过JavaScript动态生成 -->
            </div>
            
            <div class="pagination">
                <button id="firstPage" title="首页"><i class="fas fa-step-backward"></i></button>
                <button id="prevPage" title="上一页"><i class="fas fa-chevron-left"></i></button>
                <!-- 页码将动态生成 -->
                <button id="nextPage" title="下一页"><i class="fas fa-chevron-right"></i></button>
                <button id="lastPage" title="末页"><i class="fas fa-step-forward"></i></button>
                
                <div class="page-info">
                    显示 <span id="startRow">1</span> - <span id="endRow">12</span> 条，共 <span id="totalRows">20</span> 条记录
                </div>
            </div>
        </section>
    </div>

    <!-- 图片模态框 - 完整保留 -->
    <div id="imageModal">
        <span class="close">&times;</span>
        <button class="modal-nav" id="prevBtn"><i class="fas fa-chevron-left"></i></button>
        <button class="modal-nav" id="nextBtn"><i class="fas fa-chevron-right"></i></button>
        
        <div class="modal-wrapper">
            <div class="modal-content-container">
                <img class="modal-content" id="modalImage">
                <div id="caption"></div>
                <div class="modal-controls">
                    <button class="modal-btn" id="zoomIn"><i class="fas fa-search-plus"></i> 放大</button>
                    <button class="modal-btn" id="zoomOut"><i class="fas fa-search-minus"></i> 缩小</button>
                    <button class="modal-btn" id="rotateBtn"><i class="fas fa-sync-alt"></i> 旋转</button>
                    <button class="modal-btn" id="resetBtn"><i class="fas fa-redo"></i> 重置</button>
                </div>
                <div class="info-panel">
                    <div class="info-item"><i class="fas fa-info-circle"></i> 提示：使用键盘方向键浏览图片</div>
                    <div class="info-item"><i class="fas fa-info-circle"></i> +/- 放大缩小 | R 旋转图片</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 珠宝饰品数据
        const products = [
            {
                id: 101, name: "钻石项链", category: "项链", price: 12999, quantity: 5, status: "available",
                image: "https://images.unsplash.com/photo-1600721391689-2564bb8055de?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
                description: "18K白金镶嵌1.5克拉钻石，经典四爪镶嵌工艺"
            },
            {
                id: 102, name: "蓝宝石戒指", category: "戒指", price: 8999, quantity: 8, status: "available",
                image: "https://images.unsplash.com/photo-1599643477877-530eb83abc8e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
                description: "铂金镶嵌3克拉天然蓝宝石，周围镶嵌小钻石"
            },
            {
                id: 103, name: "珍珠耳环", category: "耳环", price: 4599, quantity: 0, status: "out-of-stock",
                image: "https://images.unsplash.com/photo-1617093727343-374698b1b08d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
                description: "南洋金珠配以18K黄金耳钩，优雅大气"
            },
            {
                id: 104, name: "祖母绿手镯", category: "手镯", price: 18999, quantity: 3, status: "available",
                image: "https://images.unsplash.com/photo-1617112817069-18b8a92f4c0a?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
                description: "铂金镶嵌哥伦比亚祖母绿，总重15克拉"
            },
            {
                id: 105, name: "红宝石吊坠", category: "吊坠", price: 7599, quantity: 12, status: "available",
                image: "https://images.unsplash.com/photo-1588449668365-d15e397f6787?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
                description: "18K玫瑰金镶嵌2克拉缅甸红宝石，心形设计"
            },
            {
                id: 106, name: "翡翠手链", category: "手链", price: 15999, quantity: 4, status: "available",
                image: "https://images.unsplash.com/photo-1599643478518-89fdee9b4aa3?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
                description: "天然A级翡翠珠链，每颗珠子直径10mm"
            },
            {
                id: 107, name: "钻石婚戒", category: "戒指", price: 28999, quantity: 6, status: "available",
                image: "https://images.unsplash.com/photo-1602173574767-37ac01994b2a?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
                description: "铂金镶嵌2克拉D色VVS1净度钻石"
            },
            {
                id: 108, name: "蓝宝石耳钉", category: "耳环", price: 6899, quantity: 15, status: "available",
                image: "https://images.unsplash.com/photo-1591189863430-ab87e120f312?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
                description: "18K白金镶嵌1.5克拉斯里兰卡蓝宝石"
            },
            {
                id: 109, name: "珍珠项链", category: "项链", price: 8999, quantity: 0, status: "out-of-stock",
                image: "https://images.unsplash.com/photo-1605100908091-cf99a0dd1f05?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
                description: "日本Akoya珍珠项链，珍珠直径7-8mm"
            },
            {
                id: 110, name: "祖母绿戒指", category: "戒指", price: 23999, quantity: 2, status: "available",
                image: "https://images.unsplash.com/photo-1605100804763-247f67b3557e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
                description: "铂金镶嵌5克拉哥伦比亚祖母绿，两侧配以钻石"
            },
            {
                id: 111, name: "钻石手链", category: "手链", price: 14999, quantity: 7, status: "available",
                image: "https://images.unsplash.com/photo-1581281863883-2469417a1668?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
                description: "18K白金镶嵌总重3克拉钻石，流线型设计"
            },
            {
                id: 112, name: "红宝石项链", category: "项链", price: 17999, quantity: 3, status: "available",
                image: "https://images.unsplash.com/photo-1611273426858-450d0e9e0a7f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
                description: "铂金镶嵌5克拉缅甸鸽血红宝石，配以钻石点缀"
            },
            {
                id: 113, name: "珍珠宝石胸针", category: "胸针", price: 12500, quantity: 4, status: "available",
                image: "https://images.unsplash.com/photo-1561893464-9b8f6fd3929f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
                description: "18K黄金配天然珍珠和蓝宝石，手工制作"
            },
            {
                id: 114, name: "钻石手表", category: "手表", price: 48500, quantity: 2, status: "available",
                image: "https://images.unsplash.com/photo-1587302912301-c0d3b1180c98?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
                description: "瑞士机芯白金表带，镶嵌216颗顶级钻石"
            },
            {
                id: 115, name: "蓝宝石戒指", category: "戒指", price: 13500, quantity: 6, status: "available",
                image: "https://images.unsplash.com/photo-1588449666576-8cae0b01947b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
                description: "铂金镶嵌4克拉斯里兰卡蓝宝石，周围镶嵌钻石"
            },
            {
                id: 116, name: "钻石耳坠", category: "耳环", price: 9500, quantity: 0, status: "out-of-stock",
                image: "https://images.unsplash.com/photo-1595423774387-aed4c165b81f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
                description: "梨形钻石吊坠配圆形明亮式切割钻石"
            },
            {
                id: 117, name: "翡翠戒指", category: "戒指", price: 18500, quantity: 3, status: "available",
                image: "https://images.unsplash.com/photo-1589927265396-89c10f5b6c75?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
                description: "18K黄金镶嵌帝王绿翡翠，配钻石环绕"
            },
            {
                id: 118, name: "钻石手镯", category: "手镯", price: 22500, quantity: 4, status: "available",
                image: "https://images.unsplash.com/photo-1589129252071-8b37c0ec19ae?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
                description: "铂金镶嵌满钻设计，总重5.2克拉钻石"
            },
            {
                id: 119, name: "红宝石套装", category: "套装", price: 58900, quantity: 1, status: "available",
                image: "https://images.unsplash.com/photo-1578967793385-f3a2ee0f24b2?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
                description: "项链、耳环和戒指套装，主石均为缅甸红宝石"
            },
            {
                id: 120, name: "钻石王冠", category: "头饰", price: 125000, quantity: 1, status: "available",
                image: "https://images.unsplash.com/photo-1593573813988-84ed6adcb344?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
                description: "18K白金镶嵌超过1000颗钻石，总重32克拉"
            }
        ];

        // 当前状态
        let currentPage = 1;
        let itemsPerPage = parseInt(document.getElementById('itemsPerPage').value);
        let sortField = 'id';
        let sortDirection = 'asc';
        let currentProducts = [...products];
        let currentImageIndex = 0;
        let currentProduct = null;

        // DOM元素
        const gridContainer = document.getElementById('gridContainer');
        const itemsPerPageSelect = document.getElementById('itemsPerPage');
        const sortFieldSelect = document.getElementById('sortField');
        const sortDirectionSelect = document.getElementById('sortDirection');
        const startRowEl = document.getElementById('startRow');
        const endRowEl = document.getElementById('endRow');
        const totalRowsEl = document.getElementById('totalRows');
        const searchInput = document.getElementById('searchInput');

        // 图片模态框相关元素
        const modal = document.getElementById('imageModal');
        const modalImg = document.getElementById('modalImage');
        const modalCaption = document.getElementById('caption');
        const closeModal = document.getElementsByClassName('close')[0];
        const zoomInBtn = document.getElementById('zoomIn');
        const zoomOutBtn = document.getElementById('zoomOut');
        const rotateBtn = document.getElementById('rotateBtn');
        const resetBtn = document.getElementById('resetBtn');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');

        // 图片缩放状态
        let currentScale = 1;
        let currentRotation = 0;

        // 初始化
        document.addEventListener('DOMContentLoaded', function() {
            totalRowsEl.textContent = products.length;
            renderGrid();
            setupEventListeners();
        });

        function setupEventListeners() {
            // 每页显示数量变化
            itemsPerPageSelect.addEventListener('change', function() {
                itemsPerPage = parseInt(this.value);
                currentPage = 1;
                renderGrid();
            });
            
            // 排序字段变化
            sortFieldSelect.addEventListener('change', function() {
                sortField = this.value;
                renderGrid();
            });
            
            // 排序方向变化
            sortDirectionSelect.addEventListener('change', function() {
                sortDirection = this.value;
                renderGrid();
            });

            // 分页按钮
            document.getElementById('firstPage').addEventListener('click', function() {
                currentPage = 1;
                renderGrid();
            });

            document.getElementById('prevPage').addEventListener('click', function() {
                if (currentPage > 1) {
                    currentPage--;
                    renderGrid();
                }
            });

            document.getElementById('nextPage').addEventListener('click', function() {
                const totalPages = Math.ceil(currentProducts.length / itemsPerPage);
                if (currentPage < totalPages) {
                    currentPage++;
                    renderGrid();
                }
            });

            document.getElementById('lastPage').addEventListener('click', function() {
                currentPage = Math.ceil(currentProducts.length / itemsPerPage);
                renderGrid();
            });

            // 搜索
            searchInput.addEventListener('input', function() {
                const searchTerm = this.value.toLowerCase();
                
                if (searchTerm === '') {
                    currentProducts = [...products];
                } else {
                    currentProducts = products.filter(product => {
                        return (
                            product.name.toLowerCase().includes(searchTerm) ||
                            product.category.toLowerCase().includes(searchTerm) ||
                            product.status.toLowerCase().includes(searchTerm) ||
                            product.id.toString().includes(searchTerm) ||
                            product.description.toLowerCase().includes(searchTerm)
                        );
                    });
                }
                
                currentPage = 1;
                totalRowsEl.textContent = currentProducts.length;
                renderGrid();
            });

            // 模态框关闭按钮
            closeModal.addEventListener('click', function() {
                closeImageModal();
            });

            // 点击模态框外部也关闭
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    closeImageModal();
                }
            });

            // 放大按钮
            zoomInBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                currentScale += 0.2;
                updateImageTransform();
            });

            // 缩小按钮
            zoomOutBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                if (currentScale > 0.4) {
                    currentScale -= 0.2;
                    updateImageTransform();
                }
            });

            // 旋转按钮
            rotateBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                currentRotation += 90;
                if (currentRotation >= 360) currentRotation = 0;
                updateImageTransform();
            });

            // 重置按钮
            resetBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                currentScale = 1;
                currentRotation = 0;
                updateImageTransform();
            });

            // 上一张按钮
            prevBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                navigateImage(-1);
            });

            // 下一张按钮
            nextBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                navigateImage(1);
            });

            // 键盘事件
            document.addEventListener('keydown', function(e) {
                if (modal.style.display === 'block') {
                    // 左右箭头切换图片
                    if (e.key === 'ArrowLeft') {
                        navigateImage(-1);
                    } else if (e.key === 'ArrowRight') {
                        navigateImage(1);
                    }
                    // ESC键关闭模态框
                    else if (e.key === 'Escape') {
                        closeImageModal();
                    }
                    // 加减号控制缩放
                    else if (e.key === '+' || e.key === '=') {
                        currentScale += 0.2;
                        updateImageTransform();
                    } 
                    else if (e.key === '-' || e.key === '_') {
                        if (currentScale > 0.4) {
                            currentScale -= 0.2;
                            updateImageTransform();
                        }
                    }
                    // R键旋转
                    else if (e.key === 'r' || e.key === 'R') {
                        currentRotation += 90;
                        if (currentRotation >= 360) currentRotation = 0;
                        updateImageTransform();
                    }
                }
            });
        }

        function setupImageClickEvents() {
            document.querySelectorAll('.card-image').forEach(imgContainer => {
                imgContainer.addEventListener('click', function() {
                    const card = this.closest('.product-card');
                    const productId = parseInt(card.querySelector('.product-id').textContent.split(' ')[1]);
                    const product = products.find(p => p.id === productId);
                    
                    if (product) {
                        openImageModal(product);
                    }
                });
            });
            
            document.querySelectorAll('.magnify-icon').forEach(icon => {
                icon.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const card = this.closest('.product-card');
                    const productId = parseInt(card.querySelector('.product-id').textContent.split(' ')[1]);
                    const product = products.find(p => p.id === productId);
                    
                    if (product) {
                        openImageModal(product);
                    }
                });
            });
        }

        function openImageModal(product) {
            modalImg.src = product.image;
            modalCaption.textContent = `${product.name} | ${product.category}`;
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';
            document.body.style.paddingRight = window.innerWidth - document.documentElement.clientWidth + 'px';
            
            // 重置缩放和旋转
            currentScale = 1;
            currentRotation = 0;
            updateImageTransform();
            
            // 设置当前产品
            currentProduct = product;
            
            // 查找当前产品在列表中的位置
            currentImageIndex = products.findIndex(p => p.id === product.id);
        }

        function navigateImage(direction) {
            currentImageIndex += direction;
            
            // 循环浏览图片
            if (currentImageIndex < 0) {
                currentImageIndex = products.length - 1;
            } else if (currentImageIndex >= products.length) {
                currentImageIndex = 0;
            }
            
            const product = products[currentImageIndex];
            modalImg.src = product.image;
            modalCaption.textContent = `${product.name} | ${product.category}`;
            
            // 重置缩放和旋转
            currentScale = 1;
            currentRotation = 0;
            updateImageTransform();
            
            // 添加切换动画
            modalImg.style.opacity = 0;
            setTimeout(() => {
                modalImg.style.opacity = 1;
            }, 300);
        }

        function closeImageModal() {
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
            document.body.style.paddingRight = '';
        }

        function updateImageTransform() {
            modalImg.style.transform = `scale(${currentScale}) rotate(${currentRotation}deg)`;
        }

        function renderGrid() {
            // 应用排序
            const sortedProducts = [...currentProducts].sort((a, b) => {
                let valueA, valueB;
                
                if (sortField === 'name' || sortField === 'category' || sortField === 'status') {
                    valueA = a[sortField].toLowerCase();
                    valueB = b[sortField].toLowerCase();
                } else {
                    valueA = a[sortField];
                    valueB = b[sortField];
                }
                
                if (valueA < valueB) return sortDirection === 'asc' ? -1 : 1;
                if (valueA > valueB) return sortDirection === 'asc' ? 1 : -1;
                return 0;
            });
            
            // 计算分页
            const totalItems = sortedProducts.length;
            const totalPages = Math.ceil(totalItems / itemsPerPage);
            
            if (currentPage > totalPages && totalPages > 0) {
                currentPage = totalPages;
            }
            
            const startIndex = (currentPage - 1) * itemsPerPage;
            const endIndex = Math.min(startIndex + itemsPerPage, totalItems);
            const paginatedProducts = sortedProducts.slice(startIndex, endIndex);
            
            // 更新显示信息
            startRowEl.textContent = totalItems === 0 ? 0 : startIndex + 1;
            endRowEl.textContent = endIndex;
            totalRowsEl.textContent = totalItems;
            
            // 渲染网格
            gridContainer.innerHTML = '';
            
            if (paginatedProducts.length === 0) {
                gridContainer.innerHTML = `<div class="no-results">没有找到匹配的珠宝设计</div>`;
                renderPagination(0);
                return;
            }
            
            paginatedProducts.forEach((product, index) => {
                const card = document.createElement('div');
                card.className = 'product-card';
                card.style.animationDelay = `${index * 0.05}s`;
                
                card.innerHTML = `
                    <div class="card-image">
                        <img src="${product.image}" alt="${product.name}">
                        <div class="magnify-icon">
                            <i class="fas fa-search-plus"></i>
                        </div>
                    </div>
                    <div class="card-content">
                        <div class="card-header">
                            <div class="product-id">ID: ${product.id}</div>
                            <div class="product-status status ${product.status}">${product.status === 'available' ? '有货' : '缺货'}</div>
                        </div>
                        <h3 class="product-name">${product.name}</h3>
                        <div class="product-category">${product.category}</div>
                        <p class="product-detail">${product.description}</p>
                        <div class="product-price">¥${product.price.toLocaleString()}</div>
                        <div class="product-quantity">库存: ${product.quantity}件</div>
                    </div>
                `;
                
                gridContainer.appendChild(card);
            });
            
            // 设置图片点击事件
            setupImageClickEvents();
            
            // 渲染分页控件
            renderPagination(totalPages);
        }

        function renderPagination(totalPages) {
            // 先清除现有的页码按钮
            const prevBtn = document.getElementById('prevPage');
            const nextBtn = document.getElementById('nextPage');
            const existingPageButtons = document.querySelectorAll('.page-number');
            
            existingPageButtons.forEach(btn => {
                btn.remove();
            });
            
            // 如果没有数据则不渲染分页按钮
            if (totalPages === 0) {
                return;
            }
            
            // 添加页码按钮
            const maxVisiblePages = 5; // 最多显示多少个页码按钮
            let startPage, endPage;
            
            if (totalPages <= maxVisiblePages) {
                startPage = 1;
                endPage = totalPages;
            } else {
                // 计算起始和结束页码
                const maxVisibleBeforeAfter = Math.floor(maxVisiblePages / 2);
                startPage = Math.max(currentPage - maxVisibleBeforeAfter, 1);
                endPage = startPage + maxVisiblePages - 1;
                
                if (endPage > totalPages) {
                    endPage = totalPages;
                    startPage = endPage - maxVisiblePages + 1;
                }
            }
            
            // 创建页码按钮
            for (let i = startPage; i <= endPage; i++) {
                const pageBtn = document.createElement('button');
                pageBtn.className = 'page-number';
                pageBtn.textContent = i;
                pageBtn.dataset.page = i;
                
                if (i === currentPage) {
                    pageBtn.classList.add('active');
                }
                
                pageBtn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    currentPage = parseInt(this.dataset.page);
                    renderGrid();
                });
                
                nextBtn.insertAdjacentElement('beforebegin', pageBtn);
            }
            
            // 更新按钮状态
            document.getElementById('firstPage').disabled = currentPage === 1;
            document.getElementById('prevPage').disabled = currentPage === 1;
            document.getElementById('nextPage').disabled = currentPage === totalPages;
            document.getElementById('lastPage').disabled = currentPage === totalPages;
        }
    </script>
</body>
</html>
